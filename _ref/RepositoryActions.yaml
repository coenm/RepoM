version: 1

variables:
- name: IsRepoM
  value: '{empty}{StringContains({Repository.SafePath}, "RepoM")}'

repository-specific-env-files:
- filename: '{Repository.SafePath}{slash}.git{slash}repom.env'
  when: '{var.IsRepoM}'
- filename: '{Repository.SafePath}{slash}repom.env'
  when: true

repository-specific-config-files:
- filename: '{Repository.SafePath}{slash}.git{slash}RepositoryActions.json'
- filename: '{Repository.SafePath}{slash}RepositoryActions.json'

repository-tags:
- tag: Work
  when: '{StringContains({Repository.SafePath}, "Work")}'
- tag: Private
  when: '{Not({StringContains({Repository.SafePath}, "Work")})}'

repository-actions:
  variables:
  - name: key
    value: abc
  actions:
  - type: command@1
    variables:
    - name: Test2
      value: -- T3sT2
      enabled: true
    name: '{OpenIn} Windows File Explorer'
    command: '"{Repository.SafePath}"'
    active: true
  - type: command@1
    name: '{OpenIn} Windows Terminal'
    command: wt
    arguments: -d "{Repository.SafePath}"
    active: true
  - type: command@1
    name: '{OpenIn} Windows Command Shell'
    command: cmd
    arguments: /K "cd /d {Repository.SafePath}"
    active: false
  - type: executable@1
    name: '{OpenIn} Windows PowerShell'
    executables:
    - '%WINDIR%/System32/WindowsPowerShell/v1.0/powershell.exe'
    arguments: -executionpolicy bypass -noexit -command "Set-Location '{Repository.SafePath}'"
    active: false
  - type: executable@1
    name: '{OpenIn} Visual Studio Code'
    executables:
    - '%LocalAppData%/Programs/Microsoft VS Code/code.exe'
    - '%ProgramW6432%/Microsoft VS Code/code.exe'
    arguments: '"{Repository.SafePath}"'
    active: true
  - type: executable@1
    name: '{OpenIn} Sourcetree'
    executables:
    - '%LocalAppData%/SourceTree/SourceTree.exe'
    - '%PROGRAMFILES(X86)%/Atlassian/SourceTree/SourceTree.exe'
    arguments: -f "{Repository.Location}{backslash}{Repository.Name}"
    active: true
  - type: executable@1
    name: '{OpenIn} Everything'
    executables:
    - '%ProgramW6432%/Everything/Everything.exe'
    arguments: -s """"{Repository.Path}""" "
    active: true
  - type: executable@1
    name: '{OpenIn} TotalCommander'
    executables:
    - '%ProgramW6432%/totalcmd/TOTALCMD64.EXE'
    - '%SystemDrive%/totalcmd/TOTALCMD64.EXE'
    arguments: /O /T /L="{Repository.SafePath}"
    active: true
  - type: separator@1
  - type: browse-repository@1
  - type: separator@1
  - type: git-fetch@1
  - type: git-pull@1
  - type: git-push@1
  - type: git-checkout@1
  - type: separator@1
  - type: ignore-repositories@1
  - type: separator@1
  - type: associate-file@1
    name: '{Open} Visual Studio solutions'
    extension: '*.sln'
    command: start
    arguments: '"{FilePath}"'
